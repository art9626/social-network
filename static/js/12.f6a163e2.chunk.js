(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[12],{430:function(e,t,n){"use strict";n.r(t);var s=n(19),a=n(16),c=n(0),r=n.n(c),i=n(2),o=r.a.memo((function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(null),l=Object(a.a)(o,2),j=l[0],b=l[1],m=!(1===(null===j||void 0===j?void 0:j.readyState));return Object(c.useEffect)((function(){var e=function(){setTimeout((function(){b(null)}),3e3)},t=function(e){var t=JSON.parse(e.data);1===t.length?r((function(e){return[].concat(Object(s.a)(e),Object(s.a)(t))})):r(t)};if(!j){var n=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx");n.addEventListener("close",e),n.addEventListener("message",t),b(n)}return function(){null===j||void 0===j||j.removeEventListener("close",e),null===j||void 0===j||j.removeEventListener("message",t),null===j||void 0===j||j.close()}}),[j]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(u,{messages:n}),Object(i.jsx)(d,{sendNewMessage:function(e){j&&j.send(e)},isDisabledButton:m})]})})),u=r.a.memo((function(e){var t=e.messages;return Object(i.jsx)("ul",{style:{width:"100%",height:"70vh",border:"1px solid black",overflowY:"scroll"},children:t.map((function(e,t){return Object(i.jsx)(l,{messageData:e},t)}))})})),l=r.a.memo((function(e){var t=e.messageData,n=t.photo,s=t.userName,a=t.message;return Object(i.jsxs)("li",{children:[Object(i.jsxs)("div",{children:[n?Object(i.jsx)("img",{src:"".concat(n),alt:"Avatar",style:{width:"30px",height:"30px"}}):Object(i.jsx)("div",{style:{width:"30px",height:"30px",backgroundColor:"green"}}),s]}),Object(i.jsx)("div",{children:a}),Object(i.jsx)("hr",{})]})})),d=r.a.memo((function(e){var t=e.sendNewMessage,n=e.isDisabledButton,s=Object(c.useState)(""),r=Object(a.a)(s,2),o=r[0],u=r[1];return Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o&&(t(o),u(""))},children:[Object(i.jsx)("textarea",{onChange:function(e){return u(e.target.value)},value:o,name:"newMessage"}),Object(i.jsx)("button",{disabled:n,children:"Send"})]})}));t.default=o}}]);
//# sourceMappingURL=12.f6a163e2.chunk.js.map