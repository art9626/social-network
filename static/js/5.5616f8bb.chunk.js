(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[5],{183:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(229),o=(n.a.arrayInsert,n.a.arrayMove,n.a.arrayPop,n.a.arrayPush,n.a.arrayRemove,n.a.arrayRemoveAll,n.a.arrayShift,n.a.arraySplice,n.a.arraySwap,n.a.arrayUnshift,n.a.autofill,n.a.blur,n.a.change,n.a.clearAsyncError,n.a.clearFields,n.a.clearSubmit,n.a.clearSubmitErrors,n.a.destroy,n.a.focus,n.a.initialize,n.a.registerField,n.a.reset);n.a.resetSection,n.a.setSubmitFailed,n.a.setSubmitSucceeded,n.a.startAsyncValidation,n.a.startSubmit,n.a.stopAsyncValidation,n.a.stopSubmit,n.a.submit,n.a.touch,n.a.unregisterField,n.a.untouch,n.a.updateSyncWarnings,n.a.updateSyncErrors},186:function(t,e,r){"use strict";r.d(e,"b",(function(){return u})),r.d(e,"a",(function(){return l}));var n=r(2),o=r(231),a=(r(0),r(188)),s=r.n(a),i=r(1),c=["input","meta"],u=function(t){var e=t.input,r=t.meta,a=r.touched,u=r.error,l=Object(o.a)(t,c);return Object(i.jsxs)("div",{className:s.a.formControl,children:[Object(i.jsx)("textarea",Object(n.a)(Object(n.a)(Object(n.a)({},e),l),{},{className:a&&u?"".concat(s.a.error," ").concat(s.a.formControlTextarea):s.a.formControlTextarea})),a&&u&&Object(i.jsxs)("span",{className:s.a.errorMessage,children:[" ",u," "]})]})},l=function(t){var e=t.input,r=t.meta,o=r.touched,a=r.error,c=t.type,u=t.label,l="checkbox"===c?s.a.formControlCheckbox:s.a.formControlInput;return Object(i.jsxs)("div",{className:s.a.formControl,children:[Object(i.jsx)("label",{children:u}),Object(i.jsx)("input",Object(n.a)(Object(n.a)({type:c},e),{},{className:o&&a?"".concat(s.a.error," ").concat(l):l})),o&&a&&Object(i.jsxs)("span",{className:s.a.errorMessage,children:[" ",a," "]})]})}},188:function(t,e,r){t.exports={formControl:"FormControls_formControl__2axsW",formControlTextarea:"FormControls_formControlTextarea__5AIlH",formControlInput:"FormControls_formControlInput__gNBr0",formControlCheckbox:"FormControls_formControlCheckbox__2ILOp",error:"FormControls_error__24y5C",errorMessage:"FormControls_errorMessage__NDl_o"}},195:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return a}));var n,o=(n=300,function(t){return t&&t.length>n?"Max length is ".concat(n," symbols"):void 0}),a=function(t){return t?void 0:"Field is required"}},224:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(2),o=r(16),a=r(4),s=r(1),i=function(t){return Object(o.b)((function(t){return{isAuth:t.auth.isAuth}}))((function(e){return"notAuthorized"!==e.isAuth||e.userId?Object(s.jsx)(t,Object(n.a)({},e)):Object(s.jsx)(a.a,{to:"/login"})}))}},230:function(t,e,r){"use strict";e.a=r.p+"static/media/user-icon.506e3070.jpeg"},289:function(t,e,r){t.exports={item:"Post_item__ihtu9",avatar:"Post_avatar__1wBwP"}},290:function(t,e,r){t.exports={profileContent:"ProfileInfo_profileContent__uGti0",userPhoto:"ProfileInfo_userPhoto__1UIR7"}},298:function(t,e,r){"use strict";r.r(e);var n=r(2),o=r(36),a=r(37),s=r(39),i=r(38),c=r(0),u=r.n(c),l=r(16),j=r(26),b=r(183),d=r(224),f=r(4),h=r(1),p=function(t){return t.auth},m=r(69),O=function(t){return t.profilePage.userProfile},x=function(t){return t.profilePage.userStatus},g=function(t){return t.profilePage.posts},v=function(t){return t.profilePage.inWaiting},C=r(197),P=r(198),y=r(195),S=r(186),k=Object(P.a)({form:"profileAddNewPostForm"})((function(t){var e=t.handleSubmit;return Object(h.jsxs)("form",{onSubmit:e,children:[Object(h.jsx)(C.a,{name:"newPost",component:S.b,placeholder:"Enter your post",validate:[y.b,y.a]}),Object(h.jsx)("button",{children:"Add"})]})})),_=r(289),I=r.n(_),F=function(t){return Object(h.jsxs)("li",{className:I.a.item,children:[Object(h.jsx)("img",{className:I.a.avatar,src:"https://\u0441\u043a\u0430\u0447\u0430\u0442\u044c-\u0432\u0430\u0442\u0441\u0430\u043f-\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e.\u0440\u0443\u0441/wp-content/uploads/2018/10/kartinka-na-avatar-dlya-devushki-9.jpg"}),t.message,Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{children:t.likeCount}),Object(h.jsx)("button",{children:"Like"})]})]})},A=function(t){var e=t.posts,r=t.addPost,n=t.resetForm,o=e.map((function(t){return Object(h.jsx)(F,{message:t.message,likeCount:t.likesCount},t.id)}));return Object(h.jsxs)("div",{children:[Object(h.jsx)(k,{onSubmit:function(t){r(t.newPost),n("profileAddNewPostForm")}}),Object(h.jsx)("ul",{children:o})]})},N=u.a.memo(A),w=r(18),D=r(46),M=r(290),E=r.n(M),J=function(t){var e=Object(c.useState)(!1),r=Object(w.a)(e,2),n=r[0],o=r[1],a=Object(c.useState)(t.status),s=Object(w.a)(a,2),i=s[0],u=s[1];Object(c.useEffect)((function(){u(t.status)}),[t.status]);return Object(h.jsx)("div",{children:n?Object(h.jsx)("input",{autoFocus:!0,onBlur:function(){o(!1),t.setStatus(i)},onChange:function(t){return u(t.target.value)},type:"text",value:null===i?"":i}):Object(h.jsx)("span",{onDoubleClick:function(){t.isOwner&&o(!0)},children:t.status||"---"})})},U=r(230),W=function(t){var e=t.userProfile,r=t.activeEditMode,n=t.isOwner;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:e.fullName}),Object(h.jsxs)("p",{children:["About me: ",e.aboutMe]}),Object(h.jsxs)("p",{children:["Looking for a job: ",e.lookingForAJob?"Yes":"No"]}),Object(h.jsx)("p",{children:e.lookingForAJob&&e.lookingForAJobDescription}),Object(h.jsx)("h3",{children:"Contacts"}),Object(h.jsx)("ul",{children:Object.keys(e.contacts).map((function(t){return Object(h.jsx)(L,{contactName:t,contactValue:e.contacts[t]},t)}))}),n&&Object(h.jsx)("button",{onClick:r,children:"Edit"})]})},L=function(t){var e=t.contactName,r=t.contactValue;return Object(h.jsxs)("li",{children:[e,": ",r]})},T=Object(P.a)({form:"profileDataForm"})((function(t){var e=t.handleSubmit,r=t.deactiveEditMode,n=t.userProfile;return Object(h.jsxs)("form",{onSubmit:e,children:["Full Name",Object(h.jsx)("label",{children:Object(h.jsx)(C.a,{name:"fullName",component:S.a,type:"text",validate:[y.b]})}),Object(h.jsxs)("label",{children:["About me",Object(h.jsx)(C.a,{name:"aboutMe",component:S.b,type:"text",validate:[y.b]})]}),Object(h.jsxs)("label",{children:["Looking for a job",Object(h.jsx)(C.a,{name:"lookingForAJob",component:S.a,type:"checkbox"})]}),Object(h.jsxs)("label",{children:["Looking for a job description",Object(h.jsx)(C.a,{name:"lookingForAJobDescription",component:S.b,type:"text",validate:[y.b]})]}),Object(h.jsxs)("ul",{children:[Object(h.jsx)("label",{children:"Contacts"}),Object.keys(n.contacts).map((function(t){return Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[t,Object(h.jsx)(C.a,{name:t,component:S.a,type:"text"})]})},t)}))]}),Object(h.jsx)("button",{children:"Done"}),Object(h.jsx)("button",{onClick:r,children:"Close"})]})})),V=function(t){var e=t.userProfile,r=t.userStatus,n=t.setStatus,o=t.userId,a=t.myId,s=t.setPhoto,i=t.inWaiting,u=t.setProfileData,l=Object(c.useState)(!1),j=Object(w.a)(l,2),b=j[0],d=j[1],f=o===a;return Object(h.jsx)(h.Fragment,{children:e?Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:E.a.profileContent,children:[i?Object(h.jsx)(D.a,{}):Object(h.jsx)("img",{src:e.photos.large||U.a,className:E.a.userPhoto,alt:"User photo"}),f&&Object(h.jsx)("input",{id:"input-file",onChange:function(t){t.target.files[0]&&s(t.target.files[0])},type:"file",disabled:i}),b?Object(h.jsx)(T,{onSubmit:function(t){console.log(t),u(t).then((function(){return d(!1)}))},deactiveEditMode:function(){d(!1)},userProfile:e}):Object(h.jsx)(W,{userProfile:e,activeEditMode:function(){d(!0)},isOwner:f}),Object(h.jsx)(J,{status:r,setStatus:n,isOwner:f})]})}):Object(h.jsx)(D.a,{})})},z=function(t){var e=t.userId,r=t.auth,n=t.userProfile,o=t.userStatus,a=t.myId,s=t.getProfile,i=t.getStatus,c=t.setStatus,u=t.posts,l=t.reset,j=t.addPostAC,b=t.setPhoto,d=t.inWaiting,f=t.setProfileData;return Object(h.jsxs)("div",{children:[Object(h.jsx)(V,{userId:e,myId:a,userProfile:n,userStatus:o,auth:r,getProfile:s,getStatus:i,setStatus:c,setPhoto:b,inWaiting:d,setProfileData:f}),Object(h.jsx)(N,{posts:u,resetForm:l,addPost:j})]})},B=function(t){Object(s.a)(r,t);var e=Object(i.a)(r);function r(){return Object(o.a)(this,r),e.apply(this,arguments)}return Object(a.a)(r,[{key:"getCurrentUserData",value:function(){if(this.userId=this.props.userId,!this.userId){var t=this.props.auth,e=t.isAuth,r=t.id;"authorized"===e&&(this.userId=r)}this.props.getProfile(this.userId),this.props.getStatus(this.userId)}},{key:"componentDidMount",value:function(){this.getCurrentUserData()}},{key:"componentDidUpdate",value:function(t){t.userId!==this.props.userId&&this.getCurrentUserData()}},{key:"render",value:function(){return window.props.push(this.props.posts),Object(h.jsx)(z,Object(n.a)(Object(n.a)({},this.props),{},{userId:this.userId,myId:this.props.auth.id}))}}]),r}(u.a.Component);e.default=Object(j.d)(Object(l.b)((function(t){return{userProfile:O(t),userStatus:x(t),auth:p(t),posts:g(t),inWaiting:v(t)}}),{getProfile:m.c,getStatus:m.d,setStatus:m.g,reset:b.a,addPostAC:m.a,setPhoto:m.e,setProfileData:m.f}),d.a,(function(t){return function(e){var r=Object(f.h)().userId;return Object(h.jsx)(t,Object(n.a)(Object(n.a)({},e),{},{userId:r}))}}))(B)}}]);
//# sourceMappingURL=5.5616f8bb.chunk.js.map