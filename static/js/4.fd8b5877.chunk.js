(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{232:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return j}));var n=r(13),o=r(3),s=(r(0),r(233)),a=r.n(s),c=r(30),i=r.n(c),u=r(1),l=function(e){var t=e.input,r=e.meta,n=r.touched,s=r.error,c=e.placeholder;return Object(u.jsxs)("div",{className:a.a.formControl,children:[Object(u.jsx)("textarea",Object(o.a)(Object(o.a)({},t),{},{placeholder:c,className:n&&s?"".concat(a.a.error," ").concat(a.a.formControlTextarea):a.a.formControlTextarea})),n&&s&&Object(u.jsxs)("span",{className:a.a.errorMessage,children:[" ",s," "]})]})},j=function(e){var t=e.input,r=e.meta,s=r.touched,c=r.error,l=e.type,j=e.label,b="checkbox"===l?a.a.formControlCheckbox:a.a.formControlInput;return Object(u.jsxs)("div",{className:a.a.formControl,children:[Object(u.jsx)("label",{children:j}),Object(u.jsx)("input",Object(o.a)(Object(o.a)({},t),{},{type:l,className:i()(b,Object(n.a)({},a.a.error,s&&c))})),s&&c&&Object(u.jsxs)("span",{className:a.a.errorMessage,children:[" ",c," "]})]})}},233:function(e,t,r){e.exports={formControl:"FormControls_formControl__2axsW",formControlTextarea:"FormControls_formControlTextarea__5AIlH",formControlInput:"FormControls_formControlInput__gNBr0",formControlCheckbox:"FormControls_formControlCheckbox__2ILOp",error:"FormControls_error__24y5C",errorMessage:"FormControls_errorMessage__NDl_o"}},235:function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r.d(t,"a",(function(){return n}))},236:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s}));var n,o=(n=300,function(e){return e&&e.length>n?"Max length is ".concat(n," symbols"):void 0}),s=function(e){return e?void 0:"Field is required"}},238:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(3),o=r(235),s=r(26),a=r(4),c=(r(0),r(1)),i=["isAuth"],u=function(e){return Object(s.b)((function(e){return{isAuth:e.auth.isAuth}}))((function(t){var r=t.isAuth,s=Object(o.a)(t,i),u=Object(a.g)();return"notAuthorized"===r?Object(c.jsx)(a.a,{to:"/login",state:{from:u.pathname}}):Object(c.jsx)(e,Object(n.a)({},s))}))}},243:function(e,t,r){"use strict";t.a=r.p+"static/media/user-icon.506e3070.jpeg"},301:function(e,t,r){e.exports={item:"Post_item__ihtu9",avatar:"Post_avatar__1wBwP"}},302:function(e,t,r){e.exports={profileContent:"ProfileInfo_profileContent__uGti0"}},303:function(e,t,r){e.exports={userPhoto:"ProfilePhoto_userPhoto__1yb8Q"}},311:function(e,t,r){"use strict";r.r(t);var n=r(3),o=r(18),s=r(50),a=r(19),c=r(20),i=r(0),u=r.n(i),l=r(26),j=r(37),b=r(27),f=r(238),d=r(4),O=r(1),h=r(63),p=r(83),m=function(e){return e.profilePage.userProfile},x=function(e){return e.profilePage.userStatus},g=function(e){return e.profilePage.posts},v=function(e){return e.profilePage.inWaiting},P=function(e){return e.profilePage.errorMessages},C=r(113),y=r(114),k=r(236),S=r(232),_=Object(y.a)({form:"profileAddNewPostForm"})((function(e){var t=e.handleSubmit;return Object(O.jsxs)("form",{onSubmit:t,children:[Object(O.jsx)(C.a,{name:"newPost",component:S.b,placeholder:"Enter your post",validate:[k.b,k.a]}),Object(O.jsx)("button",{children:"Add"})]})})),w=r(301),M=r.n(w),F=function(e){var t=e.message,r=e.likeCount;return Object(O.jsxs)("li",{className:M.a.item,children:[Object(O.jsx)("img",{className:M.a.avatar,src:"https://\u0441\u043a\u0430\u0447\u0430\u0442\u044c-\u0432\u0430\u0442\u0441\u0430\u043f-\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e.\u0440\u0443\u0441/wp-content/uploads/2018/10/kartinka-na-avatar-dlya-devushki-9.jpg"}),t,Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{children:r}),Object(O.jsx)("button",{children:"Like"})]})]})},N=function(e){var t=e.posts,r=e.addPost,n=e.resetForm,o=t.map((function(e){return Object(O.jsx)(F,{message:e.message,likeCount:e.likesCount},e.id)}));return Object(O.jsxs)("div",{children:[Object(O.jsx)(_,{onSubmit:function(e){r(e.newPost),n("profileAddNewPostForm")}}),Object(O.jsx)("ul",{children:o})]})},A=u.a.memo(N),E=r(29),D=r(41),I=r(302),W=r.n(I),J=function(e){var t=e.contactName,r=e.contactValue;return Object(O.jsxs)("li",{children:[t,": ",r]})},U=function(e){var t=e.userProfile,r=e.activeEditMode,n=e.isOwner;return t&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:t.fullName}),Object(O.jsxs)("p",{children:["About me: ",t.aboutMe]}),Object(O.jsxs)("p",{children:["Looking for a job: ",t.lookingForAJob?"Yes":"No"]}),t.lookingForAJob&&Object(O.jsxs)("p",{children:["My skills: ",t.lookingForAJobDescription]}),Object(O.jsx)("h3",{children:"Contacts"}),Object(O.jsx)("ul",{children:Object.keys(t.contacts).map((function(e){return Object(O.jsx)(J,{contactName:e,contactValue:t.contacts[e]},e)}))}),n&&Object(O.jsx)("button",{onClick:r,children:"Edit"})]})},L=Object(y.a)({form:"profileDataForm"})((function(e){var t=e.handleSubmit,r=e.deactiveEditMode,n=e.userProfile,o=e.error;return Object(O.jsxs)("form",{onSubmit:t,children:[o&&Object(O.jsx)("div",{children:o}),"Full Name",Object(O.jsx)("label",{children:Object(O.jsx)(C.a,{name:"fullName",component:S.a,type:"text",validate:[k.b]})}),Object(O.jsxs)("label",{children:["About me",Object(O.jsx)(C.a,{name:"aboutMe",component:S.b,type:"text",validate:[k.b]})]}),Object(O.jsxs)("label",{children:["Looking for a job",Object(O.jsx)(C.a,{name:"lookingForAJob",component:S.a,type:"checkbox"})]}),Object(O.jsxs)("label",{children:["My skills",Object(O.jsx)(C.a,{name:"lookingForAJobDescription",component:S.b,type:"text",validate:[k.b]})]}),Object(O.jsxs)("ul",{children:[Object(O.jsx)("label",{children:"Contacts"}),Object.keys(n.contacts).map((function(e){return Object(O.jsx)("li",{children:Object(O.jsxs)("label",{children:[e,Object(O.jsx)(C.a,{name:"contacts.".concat(e),component:S.a,type:"text"})]})},e)}))]}),Object(O.jsx)("button",{children:"Done"}),Object(O.jsx)("button",{onClick:r,children:"Close"})]})})),T=r(243),B=r(303),V=r.n(B),z=function(e){var t=e.errorMessage,r=e.isOwner,n=e.setPhoto,o=e.inWaiting,s=e.userProfile;return Object(O.jsxs)(O.Fragment,{children:[t&&Object(O.jsx)("div",{children:t}),o?Object(O.jsx)(D.a,{}):Object(O.jsx)("img",{src:s.photos.large||T.a,className:V.a.userPhoto,alt:"User photo"}),r&&Object(O.jsx)("input",{id:"input-file",onChange:function(e){e.target.files&&n(e.target.files[0])},type:"file",disabled:o})]})},q=r(21),G=function(e){var t=e.userStatus,r=e.isOwner,n=e.setUserStatus,o=e.errorMessage,s=e.setError,a=Object(i.useState)(!1),c=Object(E.a)(a,2),u=c[0],l=c[1],j=Object(i.useState)(t),b=Object(E.a)(j,2),f=b[0],d=b[1];Object(i.useEffect)((function(){d(t)}),[t]);return Object(O.jsxs)("div",{children:[o&&Object(O.jsx)("div",{children:o}),u?Object(O.jsx)("input",{autoFocus:!0,onBlur:function(){l(!1),n(f)},onChange:function(e){o&&s(null,"onSetStatusErrorMessage"),d(e.target.value)},type:"text",value:f}):Object(O.jsx)("span",{onDoubleClick:function(){r&&l(!0)},children:t||"---"})]})},H=function(e){var t=e.userProfile,r=e.userStatus,n=e.setStatus,o=e.isOwner,s=e.setPhoto,a=e.inWaiting,c=e.setProfileData,u=e.errorMessages,l=e.setError,j=Object(i.useState)(!1),b=Object(E.a)(j,2),f=b[0],d=b[1];return Object(O.jsx)(O.Fragment,{children:t?Object(O.jsx)("div",{children:Object(O.jsxs)("div",{className:W.a.profileContent,children:[Object(O.jsx)(z,{userProfile:t,inWaiting:a,setPhoto:s,isOwner:o,errorMessage:u.onSetPhotoErrorMessage}),f?Object(O.jsx)(L,{initialValues:t,userProfile:t,onSubmit:function(e){c(e).then((function(){return d(!1)})).catch((function(e){if(e instanceof q.b)throw e}))},deactiveEditMode:function(){d(!1)}}):Object(O.jsx)(U,{userProfile:t,activeEditMode:function(){d(!0)},isOwner:o}),Object(O.jsx)(G,{userStatus:r,setUserStatus:n,isOwner:o,errorMessage:u.onSetStatusErrorMessage,setError:l})]})}):Object(O.jsx)(D.a,{})})},Q=function(e){var t=e.isOwner,r=e.userProfile,n=e.userStatus,o=e.setStatus,s=e.posts,a=e.reset,c=e.addPost,i=e.setPhoto,u=e.inWaiting,l=e.setProfileData,j=e.errorMessages,b=e.setError;return Object(O.jsxs)("div",{children:[Object(O.jsx)(H,{isOwner:t,userProfile:r,userStatus:n,setStatus:o,setPhoto:i,inWaiting:u,setProfileData:l,errorMessages:j,setError:b}),Object(O.jsx)(A,{posts:s,resetForm:a,addPost:c})]})},Y=function(e){Object(a.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(o.a)(this,r);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).isOwner=void 0,e}return Object(s.a)(r,[{key:"getCurrentUserData",value:function(){var e=this.props.userId;if(!e){var t=this.props.auth,r=t.isAuth,n=t.id;"authorized"===r&&(e=n),this.isOwner=e===n}"number"===typeof e&&(this.props.getProfile(e),this.props.getStatus(e))}},{key:"componentDidMount",value:function(){this.getCurrentUserData()}},{key:"componentDidUpdate",value:function(e){e.userId!==this.props.userId&&this.getCurrentUserData()}},{key:"render",value:function(){return Object(O.jsx)(Q,Object(n.a)(Object(n.a)({},this.props),{},{isOwner:this.isOwner}))}}]),r}(u.a.Component),K=Object(l.b)((function(e){return{userProfile:m(e),userStatus:x(e),auth:Object(h.a)(e),posts:g(e),inWaiting:v(e),errorMessages:P(e)}}),{getProfile:p.c,getStatus:p.d,setStatus:p.g,reset:b.a,addPost:p.a.addPost,setPhoto:p.e,setProfileData:p.f,setError:p.a.setError});t.default=Object(j.d)(K,(function(e){return function(t){var r=null,o=Object(d.i)().id;return o&&(r=+o),Object(O.jsx)(e,Object(n.a)(Object(n.a)({},t),{},{userID:r}))}}),f.a)(Y)}}]);
//# sourceMappingURL=4.fd8b5877.chunk.js.map