(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[12],{431:function(e,t,n){"use strict";n.r(t);var s=n(19),c=n(16),a=n(0),r=n(2),o=function(e){var t=e.messages;return Object(r.jsx)("ul",{style:{width:"100%",height:"70vh",border:"1px solid black",overflowY:"scroll"},children:t.map((function(e,t){return Object(r.jsx)(i,{messageData:e},t)}))})},i=function(e){var t=e.messageData,n=t.photo,s=t.userName,c=t.message;return Object(r.jsxs)("li",{children:[Object(r.jsxs)("div",{children:[n?Object(r.jsx)("img",{src:"".concat(n),alt:"Avatar",style:{width:"30px",height:"30px"}}):Object(r.jsx)("div",{style:{width:"30px",height:"30px",backgroundColor:"green"}}),s]}),Object(r.jsx)("div",{children:c}),Object(r.jsx)("hr",{})]})},u=function(e){var t=e.sendNewMessage,n=Object(a.useState)(""),s=Object(c.a)(n,2),o=s[0],i=s[1];return Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o&&(t(o),i(""))},children:[Object(r.jsx)("textarea",{onChange:function(e){return i(e.target.value)},value:o,name:"newMessage"}),Object(r.jsx)("button",{children:"Send"})]})};t.default=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],i=t[1],j=Object(a.useState)(null),l=Object(c.a)(j,2),b=l[0],d=l[1];Object(a.useEffect)((function(){d(new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"))}),[]),Object(a.useEffect)((function(){b&&(b.addEventListener("message",f),b.addEventListener("open",h),b.addEventListener("close",O))}),[b]);var O=function(){console.log("WS CLOSE")},h=function(){console.log("WS OPEN")},f=function(e){console.log("WS MESSAGE");var t=JSON.parse(e.data);i((function(e){return[].concat(Object(s.a)(e),Object(s.a)(t))}))};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(o,{messages:n}),Object(r.jsx)(u,{sendNewMessage:function(e){b&&(console.log(b.readyState),b.send(e))}})]})}}}]);
//# sourceMappingURL=12.3a6f9d38.chunk.js.map