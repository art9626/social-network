{"version":3,"sources":["assets/images/user-icon.jpeg","components/Users/UserCard/UserCard.module.css","components/common/Pagination/Pagination.module.css","components/Users/UserCard/UserCard.jsx","components/Users/Users.jsx","redux/usersSelecrors.js","components/common/Pagination/Pagination.jsx","components/Users/Search/Search.jsx","components/Users/UsersContainer.jsx"],"names":["module","exports","UserCard","user","unfollow","follow","followingInProgress","isAuth","to","id","className","classes","userIcon","src","photos","small","alt","name","followed","disabled","some","onClick","Users","users","map","item","getUsers","state","usersPage","items","getPageSize","pageSize","getTotalCount","totalCount","getCurrentPage","currentPage","getIsFetching","isFetching","getFollowingInProgress","Pagination","onPageClick","portionSize","pagesCount","Math","ceil","pages","i","push","useState","portionNumber","setPortionNumber","portionCount","leftSidePageNumber","rightSidePageNumber","pagination","paginationList","filter","pageItem","selectedPage","Search","onChangeSearch","onClearSearch","searchValue","onChange","value","type","UsersContainer","props","page","getUsersList","e","clearTimeout","timerId","setState","target","setTimeout","a","this","Preloader","React","Component","connect","auth"],"mappings":"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","file":"static/js/6.79bfb424.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/user-icon.506e3070.jpeg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userIcon\":\"UserCard_userIcon__3X0ty\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"Pagination_pagination__1KkdA\",\"paginationList\":\"Pagination_paginationList__2NJHl\",\"pageItem\":\"Pagination_pageItem__2MtXm\",\"selectedPage\":\"Pagination_selectedPage__CblSr\"};","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport classes from './UserCard.module.css'\nimport userIcon from '../../../assets/images/user-icon.jpeg'\n\nconst UserCard = ({ user, unfollow, follow, followingInProgress, isAuth }) => {\n  return (\n    <li>\n      <NavLink to={`/profile/${user.id}`}>\n        <img className={classes.userIcon} src={user.photos.small ? user.photos.small : userIcon} alt=\"\" />\n      </NavLink>\n      <span>{user.name}</span>\n\n\n      {\n        isAuth === 'authorized' &&\n        (user.followed\n          ? <button\n            disabled={followingInProgress.some(id => id === user.id)}\n            onClick={() => unfollow(user.id)}\n          >\n            Unfollow\n          </button>\n\n          : <button\n            disabled={followingInProgress.some(id => id === user.id)}\n            onClick={() => follow(user.id)}\n          >\n            Follow\n          </button>)\n      }\n    </li>\n  );\n}\n\nexport default UserCard;","import React from \"react\";\nimport UserCard from \"./UserCard/UserCard\";\n\n\nconst Users = ({ users, unfollow, follow, followingInProgress, isAuth }) => {\n\n\n  return (\n    <div>\n      <ul>\n        {users.map(item => {\n          return (\n            <UserCard key={item.id} user={item} unfollow={unfollow} follow={follow} followingInProgress={followingInProgress} isAuth={isAuth} />\n          )\n        })}\n      </ul>\n    </div>\n  )\n}\n\nexport default Users;","// import { createSelector } from \"reselect\";\n\nexport const getUsers = (state) => state.usersPage.items;\n\n// export const getUsers = (state) => state.usersPage.items.filter(item => true);\n\n// export const getUsersSuperSelector = createSelector( getUsers, (users) => users.filter(item => true) )\n\nexport const getPageSize = (state) => state.usersPage.pageSize;\n\nexport const getTotalCount = (state) => state.usersPage.totalCount;\n\nexport const getCurrentPage = (state) => state.usersPage.currentPage;\n\nexport const getIsFetching = (state) => state.usersPage.isFetching;\n\nexport const getFollowingInProgress = (state) => state.usersPage.followingInProgress;","import React, { useState } from 'react';\nimport classes from './Pagination.module.css'\n\n\nconst Pagination = ({ totalCount, pageSize, currentPage, onPageClick, portionSize = 10 }) => {\n\n  const pagesCount = Math.ceil(totalCount / pageSize);\n  const pages = [];\n\n  for (let i = 1; i <= pagesCount; i++) {\n    pages.push(i);\n  }\n\n  const [portionNumber, setPortionNumber] = useState(1);\n  const portionCount = Math.ceil(pagesCount / portionSize);\n  const leftSidePageNumber = (portionNumber - 1) * portionSize + 1;\n  const rightSidePageNumber = portionNumber * portionSize;\n\n  return (\n    <div className={classes.pagination}>\n      {\n        portionNumber > 1 && <button onClick={() => setPortionNumber(portionNumber - 1)}>PREV</button>\n      }\n\n      <ul className={classes.paginationList}>\n        {pages\n          .filter(item => item >= leftSidePageNumber && item <= rightSidePageNumber)\n          .map(item => {\n            return (\n              <li\n                key={item}\n                className={item === currentPage ? `${classes.pageItem} ${classes.selectedPage}` : classes.pageItem}\n                onClick={() => onPageClick(item)}\n              >\n                {item}\n              </li>\n            );\n          })}\n      </ul>\n\n      {\n        portionNumber < portionCount && <button onClick={() => setPortionNumber(portionNumber + 1)}>NEXT</button>\n      }\n    </div>\n  )\n\n\n}\n\nexport default Pagination;","import React from 'react';\n\nconst Search = ({ onChangeSearch, onClearSearch, searchValue }) => {\n  return (\n    <div>\n      <input onChange={onChangeSearch} value={searchValue} type=\"text\" />\n      <button onClick={onClearSearch}>Clear</button>\n    </div>\n  )\n}\n\nexport default Search;","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { follow, getUsersList, unfollow } from \"../../redux/usersPageReducer\";\nimport Users from \"./Users\";\nimport Preloader from \"../common/Preloader/Preloader\";\nimport { getCurrentPage, getFollowingInProgress, getIsFetching, getPageSize, getTotalCount, getUsers } from \"../../redux/usersSelecrors\";\nimport Pagination from \"../common/Pagination/Pagination\";\nimport Search from \"./Search/Search\";\n\nclass UsersContainer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.timerId = null;\n\n    this.state = {\n      searchValue: '',\n    }\n  }\n\n\n  componentDidMount() {\n    this.props.getUsersList(this.props.pageSize, this.props.currentPage);\n  }\n\n  onPageClick = (page) => {\n    this.props.getUsersList(this.props.pageSize, page, this.state.searchValue);\n  }\n\n  onChangeSearch = (e) => {\n    clearTimeout(this.timerId);\n    this.setState({ searchValue: e.target.value });\n    this.timerId = setTimeout(() => {\n      this.props.getUsersList(this.props.pageSize, 1, this.state.searchValue);\n    }, 300);\n  }\n\n  onClearSearch = async () => {\n    // Функция setState асинхронная, если не дождаться ее выполнения, то getUsersList запустится\n    // с неактуальным значением локального стейта, потому что тот еще не успеет обновиться\n    await this.setState({ searchValue: '' });\n\n    this.props.getUsersList(this.props.pageSize, this.props.currentPage, this.state.searchValue);\n  }\n\n\n  render() {\n    // console.log('render users');\n    return (\n      <>\n        <Search onChangeSearch={this.onChangeSearch} onClearSearch={this.onClearSearch} searchValue={this.state.searchValue} />\n        <Pagination totalCount={this.props.totalCount} pageSize={this.props.pageSize} currentPage={this.props.currentPage} onPageClick={this.onPageClick} portionSize={20} />\n\n        {\n          this.props.isFetching\n            ? <Preloader />\n            : <Users\n              users={this.props.users}\n              followingInProgress={this.props.followingInProgress}\n              follow={this.props.follow}\n              unfollow={this.props.unfollow}\n              isAuth={this.props.isAuth}\n            />\n        }\n      </>\n    )\n  }\n}\n\n\n\n\nconst mapStateToProps = state => {\n  // console.log('map Users');\n  return {\n    users: getUsers(state),\n    // users: getUsersSuperSelector(state),\n    pageSize: getPageSize(state),\n    totalCount: getTotalCount(state),\n    currentPage: getCurrentPage(state),\n    isFetching: getIsFetching(state),\n    followingInProgress: getFollowingInProgress(state),\n    isAuth: state.auth.isAuth,\n  }\n}\n\n\n\n\nexport default connect(mapStateToProps, {\n  follow,\n  unfollow,\n  getUsersList\n})(UsersContainer);"],"sourceRoot":""}