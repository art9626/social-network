(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[5],{221:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n(3),o=n(232),s=(n(0),n(222)),a=n.n(s),c=n(2),i=["input","meta"],u=function(t){var e=t.input,n=t.meta,s=n.touched,u=n.error,l=Object(o.a)(t,i);return Object(c.jsxs)("div",{className:a.a.formControl,children:[Object(c.jsx)("textarea",Object(r.a)(Object(r.a)(Object(r.a)({},e),l),{},{className:s&&u?"".concat(a.a.error," ").concat(a.a.formControlTextarea):a.a.formControlTextarea})),s&&u&&Object(c.jsxs)("span",{className:a.a.errorMessage,children:[" ",u," "]})]})},l=function(t){var e=t.input,n=t.meta,o=n.touched,s=n.error,i=t.type,u=t.label,l="checkbox"===i?a.a.formControlCheckbox:a.a.formControlInput;return Object(c.jsxs)("div",{className:a.a.formControl,children:[Object(c.jsx)("label",{children:u}),Object(c.jsx)("input",Object(r.a)(Object(r.a)({type:i},e),{},{className:o&&s?"".concat(a.a.error," ").concat(l):l})),o&&s&&Object(c.jsxs)("span",{className:a.a.errorMessage,children:[" ",s," "]})]})}},222:function(t,e,n){t.exports={formControl:"FormControls_formControl__2axsW",formControlTextarea:"FormControls_formControlTextarea__5AIlH",formControlInput:"FormControls_formControlInput__gNBr0",formControlCheckbox:"FormControls_formControlCheckbox__2ILOp",error:"FormControls_error__24y5C",errorMessage:"FormControls_errorMessage__NDl_o"}},224:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var r,o=(r=300,function(t){return t&&t.length>r?"Max length is ".concat(r," symbols"):void 0}),s=function(t){return t?void 0:"Field is required"}},226:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(3),o=n(20),s=n(4),a=n(2),c=function(t){return Object(o.b)((function(t){return{isAuth:t.auth.isAuth}}))((function(e){return"notAuthorized"!==e.isAuth||e.userId?Object(a.jsx)(t,Object(r.a)({},e)):Object(a.jsx)(s.a,{to:"/login"})}))}},231:function(t,e,n){"use strict";e.a=n.p+"static/media/user-icon.506e3070.jpeg"},290:function(t,e,n){t.exports={item:"Post_item__ihtu9",avatar:"Post_avatar__1wBwP"}},291:function(t,e,n){t.exports={profileContent:"ProfileInfo_profileContent__uGti0",userPhoto:"ProfileInfo_userPhoto__1UIR7"}},299:function(t,e,n){"use strict";n.r(e);var r=n(3),o=n(39),s=n(40),a=n(42),c=n(41),i=n(0),u=n.n(i),l=n(20),j=n(29),b=n(21),d=n(226),f=n(4),h=n(2),p=function(t){return t.auth},O=n(74),m=function(t){return t.profilePage.userProfile},x=function(t){return t.profilePage.userStatus},g=function(t){return t.profilePage.posts},v=function(t){return t.profilePage.inWaiting},C=n(102),P=n(103),k=n(224),_=n(221),y=Object(P.a)({form:"profileAddNewPostForm"})((function(t){var e=t.handleSubmit;return Object(h.jsxs)("form",{onSubmit:e,children:[Object(h.jsx)(C.a,{name:"newPost",component:_.b,placeholder:"Enter your post",validate:[k.b,k.a]}),Object(h.jsx)("button",{children:"Add"})]})})),I=n(290),S=n.n(I),F=function(t){return Object(h.jsxs)("li",{className:S.a.item,children:[Object(h.jsx)("img",{className:S.a.avatar,src:"https://\u0441\u043a\u0430\u0447\u0430\u0442\u044c-\u0432\u0430\u0442\u0441\u0430\u043f-\u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e.\u0440\u0443\u0441/wp-content/uploads/2018/10/kartinka-na-avatar-dlya-devushki-9.jpg"}),t.message,Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{children:t.likeCount}),Object(h.jsx)("button",{children:"Like"})]})]})},N=function(t){var e=t.posts,n=t.addPost,r=t.resetForm,o=e.map((function(t){return Object(h.jsx)(F,{message:t.message,likeCount:t.likesCount},t.id)}));return Object(h.jsxs)("div",{children:[Object(h.jsx)(y,{onSubmit:function(t){n(t.newPost),r("profileAddNewPostForm")}}),Object(h.jsx)("ul",{children:o})]})},A=u.a.memo(N),w=n(23),D=n(50),M=n(291),E=n.n(M),J=function(t){var e=Object(i.useState)(!1),n=Object(w.a)(e,2),r=n[0],o=n[1],s=Object(i.useState)(t.status),a=Object(w.a)(s,2),c=a[0],u=a[1];Object(i.useEffect)((function(){u(t.status)}),[t.status]);return Object(h.jsx)("div",{children:r?Object(h.jsx)("input",{autoFocus:!0,onBlur:function(){o(!1),t.setStatus(c)},onChange:function(t){return u(t.target.value)},type:"text",value:null===c?"":c}):Object(h.jsx)("span",{onDoubleClick:function(){t.isOwner&&o(!0)},children:t.status||"---"})})},U=n(231),W=function(t){var e=t.userProfile,n=t.activeEditMode,r=t.isOwner;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:e.fullName}),Object(h.jsxs)("p",{children:["About me: ",e.aboutMe]}),Object(h.jsxs)("p",{children:["Looking for a job: ",e.lookingForAJob?"Yes":"No"]}),e.lookingForAJob&&Object(h.jsxs)("p",{children:["My skills: ",e.lookingForAJobDescription]}),Object(h.jsx)("h3",{children:"Contacts"}),Object(h.jsx)("ul",{children:Object.keys(e.contacts).map((function(t){return Object(h.jsx)(L,{contactName:t,contactValue:e.contacts[t]},t)}))}),r&&Object(h.jsx)("button",{onClick:n,children:"Edit"})]})},L=function(t){var e=t.contactName,n=t.contactValue;return Object(h.jsxs)("li",{children:[e,": ",n]})},T=Object(P.a)({form:"profileDataForm"})((function(t){var e=t.handleSubmit,n=t.deactiveEditMode,r=t.userProfile,o=t.error;return console.log(o),Object(h.jsxs)("form",{onSubmit:e,children:[o&&Object(h.jsx)("div",{children:o}),"Full Name",Object(h.jsx)("label",{children:Object(h.jsx)(C.a,{name:"fullName",component:_.a,type:"text"})}),Object(h.jsxs)("label",{children:["About me",Object(h.jsx)(C.a,{name:"aboutMe",component:_.b,type:"text",validate:[k.b]})]}),Object(h.jsxs)("label",{children:["Looking for a job",Object(h.jsx)(C.a,{name:"lookingForAJob",component:_.a,type:"checkbox"})]}),Object(h.jsxs)("label",{children:["My skills",Object(h.jsx)(C.a,{name:"lookingForAJobDescription",component:_.b,type:"text",validate:[k.b]})]}),Object(h.jsxs)("ul",{children:[Object(h.jsx)("label",{children:"Contacts"}),Object.keys(r.contacts).map((function(t){return Object(h.jsx)("li",{children:Object(h.jsxs)("label",{children:[t,Object(h.jsx)(C.a,{name:"contacts.".concat(t),component:_.a,type:"text"})]})},t)}))]}),Object(h.jsx)("button",{children:"Done"}),Object(h.jsx)("button",{onClick:n,children:"Close"})]})})),B=function(t){var e=t.userProfile,n=t.userStatus,r=t.setStatus,o=t.userId,s=t.myId,a=t.setPhoto,c=t.inWaiting,u=t.setProfileData,l=Object(i.useState)(!1),j=Object(w.a)(l,2),b=j[0],d=j[1],f=o===s;return Object(h.jsx)(h.Fragment,{children:e?Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:E.a.profileContent,children:[c?Object(h.jsx)(D.a,{}):Object(h.jsx)("img",{src:e.photos.large||U.a,className:E.a.userPhoto,alt:"User photo"}),f&&Object(h.jsx)("input",{id:"input-file",onChange:function(t){t.target.files[0]&&a(t.target.files[0])},type:"file",disabled:c}),b?Object(h.jsx)(T,{initialValues:e,userProfile:e,onSubmit:function(t){console.log(t),u(t).then((function(){return d(!1)})).catch((function(t){return console.log(t)}))},deactiveEditMode:function(){d(!1)}}):Object(h.jsx)(W,{userProfile:e,activeEditMode:function(){d(!0)},isOwner:f}),Object(h.jsx)(J,{status:n,setStatus:r,isOwner:f})]})}):Object(h.jsx)(D.a,{})})},V=function(t){var e=t.userId,n=t.auth,r=t.userProfile,o=t.userStatus,s=t.myId,a=t.getProfile,c=t.getStatus,i=t.setStatus,u=t.posts,l=t.reset,j=t.addPostAC,b=t.setPhoto,d=t.inWaiting,f=t.setProfileData;return Object(h.jsxs)("div",{children:[Object(h.jsx)(B,{userId:e,myId:s,userProfile:r,userStatus:o,auth:n,getProfile:a,getStatus:c,setStatus:i,setPhoto:b,inWaiting:d,setProfileData:f}),Object(h.jsx)(A,{posts:u,resetForm:l,addPost:j})]})},z=function(t){Object(a.a)(n,t);var e=Object(c.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"getCurrentUserData",value:function(){if(this.userId=this.props.userId,!this.userId){var t=this.props.auth,e=t.isAuth,n=t.id;"authorized"===e&&(this.userId=n)}this.props.getProfile(this.userId),this.props.getStatus(this.userId)}},{key:"componentDidMount",value:function(){this.getCurrentUserData()}},{key:"componentDidUpdate",value:function(t){t.userId!==this.props.userId&&this.getCurrentUserData()}},{key:"render",value:function(){return window.props.push(this.props.posts),Object(h.jsx)(V,Object(r.a)(Object(r.a)({},this.props),{},{userId:this.userId,myId:this.props.auth.id}))}}]),n}(u.a.Component);e.default=Object(j.d)(Object(l.b)((function(t){return{userProfile:m(t),userStatus:x(t),auth:p(t),posts:g(t),inWaiting:v(t)}}),{getProfile:O.c,getStatus:O.d,setStatus:O.g,reset:b.a,addPostAC:O.a,setPhoto:O.e,setProfileData:O.f}),d.a,(function(t){return function(e){var n=Object(f.h)().userId;return Object(h.jsx)(t,Object(r.a)(Object(r.a)({},e),{},{userId:n}))}}))(z)}}]);
//# sourceMappingURL=5.77a4e326.chunk.js.map